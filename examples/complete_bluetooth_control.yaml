name: "蓝牙控制完整流程"
version: "1.0"
description: "完整的蓝牙控制流程，包含前提条件检查"

actions:
  - name: "前提条件检查"
    type: "condition"
    params:
      expression: "True"
      if_true:
        - name: "请确保"
          type: "wait"
          params:
            seconds: 1
        - name: "1. 设备屏幕已解锁"
          type: "wait"
          params:
            seconds: 1
        - name: "2. 蓝牙设置页面可正常访问"
          type: "wait"
          params:
            seconds: 1
        - name: "3. 设备已连接并启用USB调试"
          type: "wait"
          params:
            seconds: 1
  
  - name: "打开蓝牙设置"
    type: "open_bluetooth"
  
  - name: "等待页面加载"
    type: "wait"
    params:
      seconds: 3
  
  - name: "截图并OCR识别"
    type: "ocr"
    params:
      save_to: "bluetooth_page"
  
  - name: "计算蓝牙开关位置"
    type: "calculate_bluetooth_switch_position"
  
  - name: "点击蓝牙开关"
    type: "click_position"
    params:
      position: 
        - "{{bluetooth_switch_x}}"
        - "{{bluetooth_switch_y}}"